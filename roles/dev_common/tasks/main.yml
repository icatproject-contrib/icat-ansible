---
- include_vars: vars/redhat.yml
  when: ansible_os_family == 'RedHat'

- include_vars: vars/debian-16.yml
  when: ansible_os_family == 'Debian' and ansible_distribution_major_version == '16'

- include_vars: vars/debian-20.yml
  when: ansible_os_family == 'Debian' and ansible_distribution_major_version == '20'

- name: "Installing common dev packages"
  package: name={{ item }} state=latest
  with_items: "{{ dev_common_pkgs }}"

- name: "Installing common dev python packages"
  pip:
    name:
      - requests-toolbelt
      - wheel

- name: "Create .m2 directory"
  file:
    path: /home/{{ payara_user }}/.m2
    state: directory
    owner: "{{ payara_user }}"
    group: "{{ payara_user }}"
    mode: 0775

- name: "Add maven settings file to maven home"
  template:
    src: templates/settings.xml.j2
    dest: /home/{{ payara_user }}/.m2/settings.xml
    owner: "{{ payara_user }}"
    group: "{{ payara_user }}"
    mode: 0664

- name: "Make test ids main folder"
  file:
    path: /home/{{ payara_user }}/test/data/ids/main
    state: directory
    owner: "{{ payara_user }}"
    group: "{{ payara_user }}"
    mode: 0775

- name: "Make test ids archive folder"
  file:
    path: /home/{{ payara_user }}/test/data/ids/archive
    state: directory
    owner: "{{ payara_user }}"
    group: "{{ payara_user }}"
    mode: 0775

- name: "Make test ids cache folder"
  file:
    path: /home/{{ payara_user }}/test/data/ids/cache
    state: directory
    owner: "{{ payara_user }}"
    group: "{{ payara_user }}"
    mode: 0775
